<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Courier v1.03</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #0e0f13;
      --panel: #171922;
      --text: #e6e6eb;
      --muted: #9aa0b4;
      --accent: #4cffb0;
      --danger: #ff5c5c;

      --btn-pad-y: 12px;
      --btn-pad-x: 16px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    .screen {
      display: none;
      padding: 16px;
      height: 100vh;
    }

    .screen.active {
      display: block;
    }

    h1 {
      margin: 0 0 12px;
      font-size: 20px;
    }

    button {
      background: var(--panel);
      color: var(--text);
      border: 1px solid #2a2d3a;
      padding: var(--btn-pad-y) var(--btn-pad-x);
      border-radius: 8px;
      font-size: 14px;
    }

    button:active {
      transform: scale(0.98);
    }

    /* MAIN MENU */

    .menu-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 24px;
    }

    .menu-btn {
      height: 90px;
      font-size: 16px;
    }

    /* JOB BOARD */

    .job {
      background: var(--panel);
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 12px;
    }

    .job h3 {
      margin: 0 0 6px;
      font-size: 15px;
    }

    .job p {
      margin: 0 0 8px;
      font-size: 13px;
      color: var(--muted);
    }

    .select-job-btn {
      padding-top: calc(var(--btn-pad-y) - 2px);
      padding-bottom: calc(var(--btn-pad-y) - 2px);
      width: 100%;
    }

    /* EN ROUTE */

    .bar {
      height: 14px;
      background: #2a2d3a;
      border-radius: 7px;
      overflow: hidden;
      margin-bottom: 6px;
    }

    .bar-fill {
      height: 100%;
      background: var(--accent);
      width: 0%;
      transition: width 0.3s linear;
    }

    .footer {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 12px;
    }

    .controls {
      display: flex;
      gap: 8px;
    }

    .controls button {
      flex: 1;
    }

    /* ENERGY MODAL */

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal-backdrop.active {
      display: flex;
    }

    .modal {
      background: var(--panel);
      padding: 16px;
      border-radius: 12px;
      width: 90%;
      max-width: 320px;
    }

    .modal button {
      width: 100%;
      margin-top: 8px;
    }
  </style>
</head>
<body>

  <!-- MAIN MENU -->
  <div id="menuScreen" class="screen active">
    <h1>Courier</h1>

    <div class="menu-grid">
      <button class="menu-btn" id="jobsBtn">Jobs</button>
      <button class="menu-btn">Shop</button>
      <button class="menu-btn">Kit</button>
      <button class="menu-btn">Bag</button>
    </div>
  </div>

  <!-- JOB BOARD -->
  <div id="jobScreen" class="screen">
    <h1>Job Board</h1>

    <div class="job">
      <h3>Downtown → Camden</h3>
      <p>Distance: 6.4 miles</p>
      <button class="select-job-btn" onclick="startJob(6.4)">Select job</button>
    </div>

    <button onclick="goMenu()">Back</button>
  </div>

  <!-- EN ROUTE -->
  <div id="routeScreen" class="screen">
    <h1>En Route</h1>

    <div class="bar">
      <div id="progressFill" class="bar-fill"></div>
    </div>

    <div class="footer">
      <span id="milesCovered">0.0 mi</span>
      <span id="mph">0 mph</span>
      <span id="milesLeft">0.0 mi</span>
    </div>

    <div class="bar">
      <div id="energyFill" class="bar-fill"></div>
    </div>

    <div class="controls">
      <button onclick="changeSpeed(-1)">− Speed</button>
      <button onclick="openEnergy()">Energy</button>
      <button onclick="changeSpeed(1)">+ Speed</button>
    </div>
  </div>

  <!-- ENERGY MODAL -->
  <div id="energyModal" class="modal-backdrop">
    <div class="modal">
      <button onclick="energyDrink()">Energy drink (+20%)</button>
      <button onclick="snack()">Snack (slow)</button>
      <button onclick="closeEnergy()">Cancel</button>
    </div>
  </div>

<script>
  const screens = {
    menu: document.getElementById('menuScreen'),
    jobs: document.getElementById('jobScreen'),
    route: document.getElementById('routeScreen')
  };

  const state = {
    totalMiles: 0,
    milesCovered: 0,
    speed: 3,
    energy: 100
  };

  const progressFill = document.getElementById('progressFill');
  const energyFill = document.getElementById('energyFill');
  const milesCoveredEl = document.getElementById('milesCovered');
  const milesLeftEl = document.getElementById('milesLeft');
  const mphEl = document.getElementById('mph');

  document.getElementById('jobsBtn').onclick = () => {
    screens.menu.classList.remove('active');
    screens.jobs.classList.add('active');
  };

  function goMenu() {
    screens.jobs.classList.remove('active');
    screens.menu.classList.add('active');
  }

  function startJob(miles) {
    state.totalMiles = miles;
    state.milesCovered = 0;
    state.energy = 100;
    state.speed = 3;

    screens.jobs.classList.remove('active');
    screens.route.classList.add('active');

    tick();
  }

  function getMaxSpeedForEnergy(e) {
    if (e <= 5) return 1;
    if (e <= 10) return 2;
    if (e <= 15) return 3;
    if (e <= 20) return 4;
    return 5;
  }

  function changeSpeed(delta) {
    const cap = getMaxSpeedForEnergy(state.energy);
    state.speed = Math.max(1, Math.min(state.speed + delta, cap));
  }

  function openEnergy() {
    document.getElementById('energyModal').classList.add('active');
  }

  function closeEnergy() {
    document.getElementById('energyModal').classList.remove('active');
  }

  function energyDrink() {
    state.energy = Math.min(100, state.energy + 20);
    closeEnergy();
  }

  function snack() {
    let elapsed = 0;
    const duration = 15000;
    const interval = 500;
    const inc = 20 / (duration / interval);

    const t = setInterval(() => {
      elapsed += interval;
      state.energy = Math.min(100, state.energy + inc);
      if (elapsed >= duration) clearInterval(t);
    }, interval);

    closeEnergy();
  }

  function tick() {
    setInterval(() => {
      const cap = getMaxSpeedForEnergy(state.energy);
      if (state.speed > cap) state.speed = cap;

      const mph = state.speed * 6;
      state.milesCovered = Math.min(
        state.totalMiles,
        state.milesCovered + mph / 3600
      );

      state.energy = Math.max(0, state.energy - state.speed * 0.02);

      updateUI();
    }, 1000);
  }

  function updateUI() {
    const pct = (state.milesCovered / state.totalMiles) * 100;
    progressFill.style.width = pct + '%';
    energyFill.style.width = state.energy + '%';

    milesCoveredEl.textContent = state.milesCovered.toFixed(1) + ' mi';
    milesLeftEl.textContent =
      Math.max(0, state.totalMiles - state.milesCovered).toFixed(1) + ' mi';
    mphEl.textContent = (state.speed * 6) + ' mph';
  }
</script>

</body>
</html>